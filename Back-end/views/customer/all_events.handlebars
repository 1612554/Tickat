  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.9/dist/css/bootstrap-select.min.css">
  <style>
     .card .card-img-top, .suggest .card .card-img-top{
         height: 140px;
     }

     .card .card-title{
        overflow: hidden;
        height: 38px;
     }
     .card .card-text{
        overflow: hidden;
        height: 35px;
     }
 </style>
 <!-- all-events.html start-->
      <div style="padding-top:80px;" class="all-events">
        <div class="row">
            
            <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3 cate">
                <div class="row">
                    
                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 mt-50" style="text-align: center; font-size: 20px">
                        <label for="input" class="control-label label-datepicker">Lọc các sự kiện</label>
                        <hr>
                    </div>
                    
                    <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 mt-20">
                            <label for="input" class="control-label label-datepicker">Thể loại</label>
                    </div>   
                    <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8 mt-20">
                        <select class="custom-select" name="" id="category_id" >
                            <option value="">Tất cả</option>
                            {{#each categories}}
                            <option value="{{id}}">{{name}}</option>
                            {{/each}}
                        </select>
                        <hr>
                    </div>

                    <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 ">
                          <label for="input" class="col-sm-2 control-label label-datepicker" >Từ:</label>
                    </div>   
                    <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">
                        <input type="date" name="" class="form-control" id="start" data-date-format="DD MM YYYY">
                    </div>
                    <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 mt-20">
                          <label for="input" class="col-sm-2 control-label label-datepicker" >Đến:</label>
                    </div>   
                    <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8 mt-20">
                        <input type="date" name="" class="form-control" id="end" data-date-format="DD MM YYYY">
                        <hr>
                    </div>

                    <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 mt-20">
                          <label for="input" class="control-label label-datepicker">Tổ chức</label>
                    </div>   
                    <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8 mt-20">
                        <select class="selectpicker" data-live-search="true" id="organization_id">
                              <option value="">Tất cả</option>
                            {{#each organizations}}
                              <option value="{{id}}">{{name}}</option>
                              {{/each}}                              
                      </select>
                    </div>
{{!-- 
                    <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 mt-20">
                            <label for="input" class="control-label label-datepicker">Trạng thái</label>
                    </div>   
                    <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8 mt-20">
                        <select class="custom-select ml-20" name="" id="" style="width: fit-content;">
                            <option value="">Chưa diễn ra</option>
                            <option value="">Đã diễn ra</option>
                        </select>
                        <hr>
                    </div> --}}

                    <br>
                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                        <button type="button" class="btn  btn-loc">Lọc</button>
                    </div>
                    
                </div>

            </div>
            
            <div class="col-xs-9 col-sm-9 col-md-9 col-lg-9">
                <div class="filter">
                  <div style="text-align: -webkit-right; margin-right:10px; ">
                    <nav class="breadcrumb">
                        <a class="breadcrumb-item" href="#">Trang chủ</a>
                        <a class="breadcrumb-item" href="#">Tất cả sự kiện</a>
                        <span class="breadcrumb-item active">Music</span>
                    </nav>
                    
                    <select id="orderBy" class="form-control sort" required="required">
                      <option value="-1">Sắp xếp</option>
                      <option value="1">Giá: cao đến thấp</option>
                      <option value="2">Giá: thấp đến cao</option>
                      <option value="4">Thời gian: sắp diễn ra</option>
                      <option value="3">Thời gian: diễn ra trễ</option>
                    </select>                    
                  </div>
                </div>

                <div id="events">
                    <div class="row bg-white box">
                        
                        {{#each events}}
                        <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                            <div class="card wow zoomIn" onclick="location.href='/events/{{id}}'">
                                <img class="card-img-top" src="{{img}}" alt="Card image cap">
                                <span class="badge-price">{{tickets.[0].price}} VNĐ</span>
                                <div class="card-body row">
                                <div class="col-xs-4 col-sm-4 col-md-4 col-lg-3">
                                    <div class="date-box">
                                        <div class="date-header">
                                            {{date_arr.mm_en}}
                                        </div>
                                        <div class="date-body">
                                            {{date_arr.dd}}
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xs-8 col-sm-8 col-md-8 col-lg-9">
                                    <h6 class="card-title">{{name}}</h6>
                                    <hr>
                                    <p class="card-text"><i class="fa fa-clock-o" aria-hidden="true"></i>{{date}}</p>
                                    <p class="card-text"><i class="fa fa-map-marker" aria-hidden="true"></i>{{address}}</p>
                                </div>
                                </div>
                            </div>
                        </div>
                        {{/each}}
                    </div>

                    <div class="row pag">
                            <nav>
                                {{{paginate pagination paginationClass="pagination" leftText="Prev" rightText="Next" limit="4"}}}
                            </nav>
                    </div>
                </div>
            </div>
            
        </div>
    </div>

<script>
    $('.btn-loc').click(function (e) { 
        e.preventDefault();
        $.ajax({
            type: "get",
            url: "/events/filter",
            data: {
                category_id: $('#category_id').val(),
                organization_id:  $('#organization_id').val(),
                start: $('#start').val(),
                end: $('#end').val()
            },
            success: function (response) {
                $('#events').html(response);
            }
        });
    });

    $('.page-link').click(function (e) { 
        e.preventDefault();
        var queryParams = $(this).attr('href');
        $.ajax({
            type: "get",
            url: "/events/filter"+queryParams,
            success: function (response) {
                $('#events').html(response);
            }
        });
    });

    $('#orderBy').change(function (e) { 
        e.preventDefault();
        var orderID = parseInt($(this).val());
        var order = {
            order_by : "",
            order: "desc"
        };
        switch (orderID) {
            case 1:    order.order_by = "price"; break;
            case 2:     order.order_by = "price", order.order = "asc"; break;
            case 3:     order.order_by = "date"; break;
            case 4:     order.order_by = "date", order.order = "asc"; break;
            default: order = null; break;
        };

        if(order!=null){
            $.ajax({
                type: "get",
                url: "/events/filter",
                data: {
                    category_id: $('#category_id').val(),
                    organization_id:  $('#organization_id').val(),
                    start: $('#start').val(),
                    end: $('#end').val(),
                    order: order
                },
                success: function (response) {
                    $('#events').html(response);
                }
            });
        }
    });

</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.9/dist/js/bootstrap-select.min.js"></script>